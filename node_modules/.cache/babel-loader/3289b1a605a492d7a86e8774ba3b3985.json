{"ast":null,"code":"import _regeneratorRuntime from\"G:/Languages/React/technews-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"G:/Languages/React/technews-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"G:/Languages/React/technews-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"G:/Languages/React/technews-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var AppContext=/*#__PURE__*/createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;// const {text}=useContext(NewsContext);\nvar initialstate={search:\"General\",isLoading:true,pageSize:20,page:1,articles:[],totalResults:5};var reducer=function reducer(state,action){switch(action.type){case\"GET_STORIES\":return _objectSpread(_objectSpread({},state),{},{articles:action.payload.articles,isLoading:false,totalResults:action.payload.totalResults});case\"GET_PREV\":return _objectSpread(_objectSpread({},state),{},{page:state.page-1});case\"GET_NEXT\":return _objectSpread(_objectSpread({},state),{},{page:state.page+1});case\"ONCHANGE\":return _objectSpread(_objectSpread({},state),{},{search:action.payload});case\"SEARCH_NEWS\":return _objectSpread(_objectSpread({},state),{},{search:action.payload});default:return state;}};var _useReducer=useReducer(reducer,initialstate),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var fetchnews=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url);case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;// setArticles(data.articles);\ndispatch({type:\"GET_STORIES\",payload:{articles:data.articles,totalResults:data.totalResults}});console.log(data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function fetchnews(_x){return _ref2.apply(this,arguments);};}();var getPrev=function getPrev(){dispatch({type:\"GET_PREV\"});};var getNext=function getNext(){console.log(state.search);dispatch({type:\"GET_NEXT\"});};var onchange=function onchange(search_text){dispatch({type:\"ONCHANGE\",payload:search_text});};function searchNews(searching){dispatch({type:\"SEARCH_NEWS\",payload:searching});}// eslint-disable-next-line\nuseEffect(function(){if(state.search===\"\"){fetchnews(\"https://newsapi.org/v2/everything?q=GENERAL&apiKey=15229b971c064130806ab63d4fb35172&page=\".concat(state.page,\"&pageSize=\").concat(state.pageSize));}else{fetchnews(\"https://newsapi.org/v2/everything?q=\".concat(state.search,\"&apiKey=15229b971c064130806ab63d4fb35172&page=\").concat(state.page,\"&pageSize=\").concat(state.pageSize));}},[state.search,state.page,state.totalResults,state.pageSize]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{onchange:onchange,getPrev:getPrev,getNext:getNext,searchNews:searchNews}),children:children});};var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider,useGlobalContext};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","AppContext","AppProvider","children","initialstate","search","isLoading","pageSize","page","articles","totalResults","reducer","state","action","type","payload","dispatch","fetchnews","url","fetch","res","json","data","console","log","getPrev","getNext","onchange","search_text","searchNews","searching","useGlobalContext"],"sources":["G:/Languages/React/technews-app/src/Components/Main.js"],"sourcesContent":["import React,{createContext,useContext,useReducer,useEffect} from 'react';\r\n\r\nconst AppContext = createContext();\r\n\r\nconst AppProvider = ({ children }) => {\r\n  // const {text}=useContext(NewsContext);\r\n      \r\n\r\n         \r\n          const initialstate={\r\n            search:\"General\",\r\n            isLoading:true,\r\n            pageSize:20,\r\n            page:1,\r\n            articles:[],\r\n            totalResults:5\r\n        }\r\n        const reducer=(state,action)=>{\r\n          switch(action.type){\r\n          case \"GET_STORIES\":\r\n            return (\r\n              {...state,\r\n                articles:action.payload.articles,\r\n                isLoading:false,\r\n                totalResults:action.payload.totalResults\r\n\r\n              }\r\n            )\r\n          \r\n          \r\n                case \"GET_PREV\":\r\n                  return{\r\n                    ...state,\r\n                    page:state.page-1\r\n                  }\r\n                  case \"GET_NEXT\":\r\n                    return{\r\n                      ...state,\r\n                      page:state.page+1\r\n                    }\r\n                    case \"ONCHANGE\":\r\n                      return{\r\n                        ...state,\r\n                        search:action.payload\r\n                      }\r\n                    case \"SEARCH_NEWS\":\r\n                    \r\n                      return{\r\n                        ...state,\r\n                        search:action.payload,\r\n                        \r\n                      }\r\n              default:\r\n            return state;\r\n          }\r\n         \r\n        }\r\n        const[state,dispatch]=useReducer(reducer,initialstate);\r\n\r\n      const fetchnews=async (url)=>{\r\n          try{\r\n              // const url=;\r\n              const res= await fetch(url);\r\n              const data=await res.json();\r\n              // setArticles(data.articles);\r\n              dispatch({type:\"GET_STORIES\",\r\n                             payload:{\r\n                              articles:data.articles,\r\n                              totalResults:data.totalResults\r\n                             },\r\n                            })\r\n              console.log(data);\r\n\r\n            }\r\n            catch(error)\r\n            {\r\n              console.log(error);\r\n            }\r\n            \r\n                           \r\n          }\r\n\r\n const getPrev=()=>{\r\n  dispatch({\r\n    type:\"GET_PREV\",\r\n    \r\n  })\r\n }\r\n const getNext=()=>{\r\n  console.log(state.search);\r\n  dispatch({\r\n    type:\"GET_NEXT\",\r\n\r\n  })\r\n }\r\n const onchange=(search_text)=>{\r\n  dispatch({\r\n    type:\"ONCHANGE\",\r\n    payload:search_text\r\n  })\r\n }\r\n function searchNews(searching){\r\n  \r\ndispatch({\r\n  type:\"SEARCH_NEWS\",\r\n  payload:searching\r\n  \r\n})\r\n }\r\n    // eslint-disable-next-line\r\n          useEffect(() => {\r\n            if(state.search===\"\"){\r\n              fetchnews(`https://newsapi.org/v2/everything?q=GENERAL&apiKey=15229b971c064130806ab63d4fb35172&page=${state.page}&pageSize=${state.pageSize}`);\r\n          \r\n  }\r\nelse{\r\n  fetchnews(`https://newsapi.org/v2/everything?q=${state.search}&apiKey=15229b971c064130806ab63d4fb35172&page=${state.page}&pageSize=${state.pageSize}`);\r\n  \r\n\r\n}  },[state.search,state.page,state.totalResults,state.pageSize]);\r\n  return <AppContext.Provider value={{...state,onchange,getPrev,getNext,searchNews}}>{children}</AppContext.Provider>;\r\n};\r\nconst useGlobalContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n\r\nexport {AppContext, AppProvider,  useGlobalContext };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}